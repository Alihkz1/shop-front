import{C as y,E as tt,F as P,G as S,H as N,I as et,a as T,e as b,f as V,g as w,h as k,i as j,j as v,l as M,m as Y,n as L,o as E,q as $,r as U}from"./chunk-FXMADUMU.js";import"./chunk-ZMDOF3EM.js";import{b as F,c as _,d as X,da as B}from"./chunk-MS6WNOJG.js";import{$b as K,Ab as p,I,Ma as m,Ub as J,W as H,X as O,Xa as s,Ya as l,Z,Za as f,ca as C,da as D,db as h,ec as Q,fc as x,jc as R,nb as c,pb as u,xa as o,ya as d,zb as a}from"./chunk-2WFHQBDQ.js";var W=function(e){return e[e.USER=0]="USER",e[e.ADMIN=1]="ADMIN",e}(W||{});var A=(()=>{let t=class t{constructor(n){this.http=n}login(n){return this.http.post(U.API_BASE+"user/login",n)}signup(n){return this.http.post(U.API_BASE+"user/signup",n)}};t.\u0275fac=function(i){return new(i||t)(Z(K))},t.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var lt=(()=>{let t=class t{constructor(n,i,r,g,G){this.router=n,this.authService=i,this.clientService=r,this.translate=g,this.message=G,this.loginLoading=!1,this.emailControl=new v(null,V.required),this.passwordControl=new v(null,V.required)}forgetPassword_onClick(){this.router.navigate(["/auth/forget-password"])}register_onClick(){this.router.navigate(["/auth/signup"])}login_onClick(){this.loginLoading=!0,this.authService.login({email:this.emailControl.value,password:this.passwordControl.value}).pipe(I(()=>{this.loginLoading=!1})).subscribe(({success:n,data:i})=>{n?(this.clientService.setUser=i.user,i.user.role===W.ADMIN?this.router.navigate(["/admin"]):this.router.navigate(["/menu/categories"]),this.message.create("success",this.translate.instant("loginSuccess"))):this.message.create("error",this.translate.instant("loginFailed"))})}};t.\u0275fac=function(i){return new(i||t)(d(x),d(A),d(T),d(F),d(B))},t.\u0275cmp=C({type:t,selectors:[["app-login"]],decls:23,vars:22,consts:[[1,"login"],[1,"login-title"],[1,"flex-grow"],[1,"login-form"],["nz-input","",3,"placeholder","formControl"],["nz-input","",1,"mt-2",3,"placeholder","formControl"],["type","submit",1,"d-none",3,"click"],[1,"login-submit"],["nz-button","","nzType","primary",3,"click","disabled","nzLoading"],[1,"d-flex","justify-content-center","w-100"],[1,"option",3,"click"]],template:function(i,r){i&1&&(s(0,"div",0)(1,"div",1),c(2),a(3,"translate"),l(),s(4,"div",2)(5,"form",3),f(6,"input",4),a(7,"translate"),f(8,"input",5),a(9,"translate"),s(10,"button",6),h("click",function(){return r.login_onClick()}),l()(),s(11,"div",7)(12,"button",8),h("click",function(){return r.login_onClick()}),c(13),a(14,"translate"),l()()(),s(15,"div",9)(16,"button",10),h("click",function(){return r.forgetPassword_onClick()}),c(17),a(18,"translate"),l(),c(19," | "),s(20,"button",10),h("click",function(){return r.register_onClick()}),c(21),a(22,"translate"),l()()()),i&2&&(o(2),u(" ",p(3,10,"welcome")," "),o(4),m("placeholder",p(7,12,"email"))("formControl",r.emailControl),o(2),m("placeholder",p(9,14,"password"))("formControl",r.passwordControl),o(4),m("disabled",r.emailControl.invalid||r.passwordControl.invalid)("nzLoading",r.loginLoading),o(),u(" ",p(14,16,"getIn")," "),o(4),u(" ",p(18,18,"forgetPassword")," "),o(4),u(" ",p(22,20,"register")," "))},dependencies:[y,N,P,S,M,b,w,k,Y,_],styles:[".login[_ngcontent-%COMP%]{height:100%;width:100%;padding:10px 0;display:flex;flex-direction:column}.login-title[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]{padding:10px 30px}.login-submit[_ngcontent-%COMP%]{padding-right:30px}.login-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}button.option[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}button.option[_ngcontent-%COMP%]:hover{color:var(--link)}input[_ngcontent-%COMP%]{height:40px;border-radius:4px}"]});let e=t;return e})();var ct=(()=>{let t=class t{constructor(n,i,r,g,G){this.router=n,this.authService=i,this.message=r,this.translate=g,this.clientService=G,this.signupLoading=!1,this.form=new j({email:new v,password:new v,phone:new v,name:new v})}signup_onClick(){this.signupLoading=!0,this.authService.signup(this.form.value).pipe(I(()=>{this.signupLoading=!1})).subscribe(({success:n,data:i})=>{n?(this.clientService.setUser=i.user,this.router.navigate(["/menu/categories"]),this.message.create("success",this.translate.instant("signUpSuccess"))):this.message.create("error",this.translate.instant("signUpFailed"))})}login_onClick(){this.router.navigate(["/auth/login"])}};t.\u0275fac=function(i){return new(i||t)(d(x),d(A),d(B),d(F),d(T))},t.\u0275cmp=C({type:t,selectors:[["app-signup"]],decls:22,vars:23,consts:[[1,"signup"],[1,"signup-title"],[1,"flex-grow"],[1,"signup-form",3,"formGroup"],["nz-input","","formControlName","name",3,"placeholder"],["nz-input","","formControlName","phone",1,"mt-2",3,"placeholder"],["nz-input","","formControlName","email",1,"mt-2",3,"placeholder"],["nz-input","","formControlName","password",1,"mt-2",3,"placeholder"],[1,"signup-submit"],["nz-button","","nzType","primary",3,"click","nzLoading"],[1,"d-flex","justify-content-center","w-100"],[1,"option",3,"click"]],template:function(i,r){i&1&&(s(0,"div",0)(1,"div",1),c(2),a(3,"translate"),l(),s(4,"div",2)(5,"form",3),f(6,"input",4),a(7,"translate"),f(8,"input",5),a(9,"translate"),f(10,"input",6),a(11,"translate"),f(12,"input",7),a(13,"translate"),l(),s(14,"div",8)(15,"button",9),h("click",function(){return r.signup_onClick()}),c(16),a(17,"translate"),l()()(),s(18,"div",10)(19,"button",11),h("click",function(){return r.login_onClick()}),c(20),a(21,"translate"),l()()()),i&2&&(o(2),u(" ",p(3,9,"register")," "),o(3),m("formGroup",r.form),o(),m("placeholder",p(7,11,"enterName")),o(2),m("placeholder",p(9,13,"phone")),o(2),m("placeholder",p(11,15,"email")),o(2),m("placeholder",p(13,17,"password")),o(3),m("nzLoading",r.signupLoading),o(),u(" ",p(17,19,"register")," "),o(4),u(" ",p(21,21,"alreadyHaveAccount")," "))},dependencies:[y,N,P,S,M,b,w,k,L,E,_],styles:[".signup[_ngcontent-%COMP%]{height:100%;width:100%;padding:10px 0;display:flex;flex-direction:column}.signup-title[_ngcontent-%COMP%]{padding:10px 30px}.signup-form[_ngcontent-%COMP%]{padding:10px 30px;max-width:466px}.signup-submit[_ngcontent-%COMP%]{padding-right:30px}.signup-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}button.option[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}button.option[_ngcontent-%COMP%]:hover{color:var(--link)}input[_ngcontent-%COMP%]{height:40px;border-radius:4px}"]});let e=t;return e})();var mt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["auth-routing"]],decls:3,vars:0,consts:[[1,"main"],[1,"box"]],template:function(i,r){i&1&&(s(0,"div",0)(1,"div",1),f(2,"router-outlet"),l()())},dependencies:[Q],styles:[".main[_ngcontent-%COMP%]{background:var(--main-bg);height:100%;width:100%;display:flex;justify-content:center;align-items:center}.row[_ngcontent-%COMP%]{height:400px}.box[_ngcontent-%COMP%]{border:1px solid rgb(237,237,237);min-width:400px;max-width:fit-content;height:400px;background:#fff;border-radius:6px;box-shadow:1px 1px 10px #dcdcdc}@media (max-width: 670px){.box[_ngcontent-%COMP%]{width:300px;height:350px}}"]});let e=t;return e})();var dt=(()=>{let t=class t{constructor(n){this.router=n,this.forgetLoading=!1,this.form=new j({email:new v})}forget_onClick(){}login_onClick(){this.router.navigate(["/auth/login"])}signup_onClick(){this.router.navigate(["/auth/signup"])}};t.\u0275fac=function(i){return new(i||t)(d(x))},t.\u0275cmp=C({type:t,selectors:[["app-forget-password"]],decls:20,vars:17,consts:[[1,"forget"],[1,"forget-title"],[1,"flex-grow"],[1,"forget-form",3,"formGroup"],["nz-input","","formControlName","email",3,"placeholder"],[1,"forget-submit"],["nz-button","","nzType","primary",3,"click","nzLoading"],[1,"d-flex","justify-content-center","w-100"],[1,"option",3,"click"]],template:function(i,r){i&1&&(s(0,"div",0)(1,"div",1),c(2),a(3,"translate"),l(),s(4,"div",2)(5,"form",3),f(6,"input",4),a(7,"translate"),l(),s(8,"div",5)(9,"button",6),h("click",function(){return r.forget_onClick()}),c(10),a(11,"translate"),l()()(),s(12,"div",7)(13,"button",8),h("click",function(){return r.login_onClick()}),c(14),a(15,"translate"),l(),c(16," | "),s(17,"button",8),h("click",function(){return r.signup_onClick()}),c(18),a(19,"translate"),l()()()),i&2&&(o(2),u(" ",p(3,7,"forgetPassword")," "),o(3),m("formGroup",r.form),o(),m("placeholder",p(7,9,"email")),o(3),m("nzLoading",r.forgetLoading),o(),u(" ",p(11,11,"submit")," "),o(4),u(" ",p(15,13,"getIn")," "),o(4),u(" ",p(19,15,"register")," "))},dependencies:[y,N,P,S,M,b,w,k,L,E,_],styles:[".forget[_ngcontent-%COMP%]{height:100%;width:100%;padding:10px 0;display:flex;flex-direction:column}.forget-title[_ngcontent-%COMP%]{padding:10px 30px}.forget-form[_ngcontent-%COMP%]{padding:10px 30px;max-width:466px}.forget-submit[_ngcontent-%COMP%]{padding-right:30px}.forget-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}button.option[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}button.option[_ngcontent-%COMP%]:hover{color:var(--link)}input[_ngcontent-%COMP%]{height:40px;border-radius:4px}"]});let e=t;return e})();var ht=[{path:"",component:mt,children:[{path:"login",component:lt},{path:"signup",component:ct},{path:"forget-password",component:dt}]}],ut=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=D({type:t}),t.\u0275inj=O({imports:[R.forChild(ht),R]});let e=t;return e})();var vt=[tt,et],Xt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=D({type:t}),t.\u0275inj=O({imports:[J,ut,X,vt,$]});let e=t;return e})();export{Xt as AuthModule};
